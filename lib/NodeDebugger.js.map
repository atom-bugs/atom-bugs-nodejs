{"version":3,"file":"NodeDebugger.js","sourceRoot":"","sources":["../src/NodeDebugger.ts"],"names":[],"mappings":"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","sourcesContent":["'use babel';\n/*!\n * XAtom Debug\n * Copyright(c) 2017 Williams Medina <williams.medinaa@gmail.com>\n * MIT Licensed\n */\nconst { Emitter, CompositeDisposable } = require('atom');\nconst { SourceMapConsumer } = require('source-map');\nimport { parse as pathParse, resolve as pathResolve, join } from 'path';\nimport { readFile, stat } from 'fs';\nimport { request } from 'http';\nimport { get } from 'lodash';\nimport { ConsoleMessage, Domains, ChromeDebuggingProtocol }  from 'chrome-debugging-protocol';\n\nexport class Debugger {\n  public protocol: ChromeDebuggingProtocol;\n  public isRunning: boolean;\n  private emitter = new Emitter();\n  private scripts: any[] = [];\n  private breakpoints: any[] = [];\n  private sourcemaps: any[] = [];\n  constructor () {}\n  onDidPause (cb) {\n    return this.emitter.on('didPause', cb);\n  }\n  onDidPauseOnLocation (cb) {\n    return this.emitter.on('didPauseOnLocation', cb);\n  }\n  onDidResume (cb) {\n    return this.emitter.on('didResume', cb);\n  }\n  onDidException (cb) {\n    return this.emitter.on('didException', cb);\n  }\n  onDidAddScript (cb) {\n    return this.emitter.on('didAddScript', cb);\n  }\n  onDidLoadFile (cb) {\n    return this.emitter.on('didLoadFile', cb);\n  }\n  getScriptOriginalLocation (script: any, lineNumber: number, columnNumber?: number) {\n    const fileLocation = {\n      filePath: script.url,\n      lineNumber: lineNumber,\n      columnNumber: columnNumber || 0\n    };\n    if (script.sourcemapConsumer) {\n      let sourceLocation = {\n        line: lineNumber + 1,\n        column: columnNumber || 0,\n        bias: SourceMapConsumer.LEAST_UPPER_BOUND\n      }\n      let position = script.sourcemapConsumer.originalPositionFor(sourceLocation)\n      if (position.source === null) {\n        sourceLocation.bias = SourceMapConsumer.GREATEST_LOWER_BOUND\n        position = script.sourcemapConsumer.originalPositionFor(sourceLocation)\n      }\n      if (position.source) {\n        fileLocation.filePath = position.source;\n        fileLocation.lineNumber = position.line - 1;\n        fileLocation.columnNumber = position.column;\n      }\n    }\n    return fileLocation;\n  }\n  getGeneratedLocation (location) {\n    console.log('generated', location);\n  }\n  getScript (cb) {\n    return new Promise((resolve, reject) => {\n      let script = this.scripts.find(cb);\n      if (script) {\n        resolve(script);\n      } else {\n        let handler;\n        const disposable = this.emitter.on('didAddScript', (script) => {\n          if (cb(script)) {\n            clearTimeout(handler);\n            resolve(script);\n          }\n        });\n        handler = setTimeout(() => {\n          disposable.dispose();\n          reject('Unable to get script');\n        }, 5000);\n      }\n    })\n  }\n  setup (): Promise<any> {\n    var { Profiler, Runtime, Debugger, Page } = this.protocol.getDomains();\n    Debugger.scriptParsed((params) => {\n      this.addScript(params);\n    });\n    Debugger.paused(async (params) => {\n      this.emitter.emit('didPause', params);\n    });\n    Debugger.resumed((params) => {\n      this.emitter.emit('didResume');\n    });\n    Runtime.exceptionThrown((params) => {\n      this.emitter.emit('didException', params);\n    });\n    Runtime.consoleAPICalled((params) => {\n      console.log('consoleAPICalled', params);\n    });\n    return Promise.all([\n      Runtime.enable(),\n      Debugger.enable(),\n      Debugger.setPauseOnExceptions({ state: 'none' }),\n      Debugger.setAsyncCallStackDepth({ maxDepth: 0 }),\n      Debugger.setBreakpointsActive({\n        active: true\n      }),\n      Profiler.enable(),\n      Profiler.setSamplingInterval({ interval: 100 }),\n      Debugger.setBlackboxPatterns({ patterns: [] }),\n      Runtime.runIfWaitingForDebugger()\n    ]);\n  }\n  setPauseOnExceptions (state: string) {\n    const { Debugger } = this.protocol.getDomains();\n    return Debugger.setPauseOnExceptions({ state });\n  }\n  setBreakpointsActive (active: boolean) {\n    const { Debugger } = this.protocol.getDomains();\n    return Debugger.setBreakpointsActive({ active });\n  }\n  async addSourceMap (params: any) {\n    const scriptUrl = pathParse(params.url);\n    const isBase64 = params.sourceMapURL.match(/^data\\:application\\/json\\;(charset=.+)?base64\\,(.+)$/);\n    let sourceMapContent = '';\n    if (isBase64) {\n      sourceMapContent = Buffer.from(isBase64[2], 'base64').toString();\n    } else {\n      sourceMapContent = await new Promise<string>((resolve, reject) => {\n        const sourceMapPath = pathResolve(scriptUrl.dir, params.sourceMapURL);\n        readFile(sourceMapPath, (err, data) => {\n          if (err) return reject(err);\n          resolve(data.toString());\n        })\n      });\n    }\n    const sourceMapObject = await new Promise<any>((resolve, reject) => {\n      try {\n        resolve(JSON.parse(sourceMapContent));\n      } catch (e) {\n        reject(e);\n      }\n    });\n    sourceMapObject.file = params.url;\n    sourceMapObject.sources = sourceMapObject.sources.map((filePath) => {\n      const sourcePath = pathResolve(scriptUrl.dir, sourceMapObject.sourceRoot, filePath);\n      this.loadScript(sourcePath);\n      return sourcePath;\n    });\n    const consumer = new SourceMapConsumer(sourceMapObject);\n    this.sourcemaps.push(consumer);\n    return consumer;\n  }\n  async loadScript (fileUrl: string) {\n    const fileExists = await new Promise<boolean>((resolve) => {\n      stat(fileUrl, (err) => resolve(err ? false : true));\n    });\n    if (fileExists) {\n      this.emitter.emit('didLoadFile', fileUrl);\n    }\n  }\n  async addScript (script) {\n    if (script.sourceMapURL) {\n      script.sourcemapConsumer = await this.addSourceMap(script);\n    }\n    this.scripts.push(script);\n    this.emitter.emit('didAddScript', script);\n    this.loadScript(script.url);\n  }\n  requestIfRunning (cb): Promise<any> {\n    if (this.isRunning) {\n      return cb(this.protocol.getDomains());\n    }\n    return Promise.resolve();\n  }\n  addBreakpoint (breakpoint) {\n    return this.requestIfRunning(async ({ Debugger }) => {\n      const script = this.scripts.find((script) => {\n        return script.url === breakpoint.filePath\n      });\n      const breakpointLocation = {\n        url: breakpoint.filePath,\n        lineNumber: breakpoint.lineNumber - 1,\n        columnNumber: breakpoint.columnNumber || 0\n      };\n      if (!script) {\n        const consumer = this.sourcemaps.find((s) => {\n          return s.sources.includes(breakpoint.filePath);\n        });\n        if (consumer) {\n          let fileLocation = {\n            source: breakpoint.filePath,\n            line: breakpoint.lineNumber,\n            column: breakpoint.columnNumber || 0,\n            bias: SourceMapConsumer.LEAST_UPPER_BOUND\n          }\n          let position = consumer.generatedPositionFor(fileLocation)\n          if (position.line === null) {\n            fileLocation.bias = SourceMapConsumer.GREATEST_LOWER_BOUND\n            position = consumer.generatedPositionFor(fileLocation)\n          }\n          if (position) {\n            breakpointLocation.url = consumer.file;\n            breakpointLocation.lineNumber = position.line - 1;\n            breakpointLocation.columnNumber = position.column;\n          }\n        }\n      }\n      return Debugger\n        .setBreakpointByUrl(breakpointLocation)\n        .then((params) => {\n          this.breakpoints.push(Object.assign(params, breakpoint));\n        });\n    });\n  }\n  removeBreakpoint (breakpoint) {\n    return this.requestIfRunning(({ Debugger }) => {\n      const item = this.breakpoints.find((b) => {\n        return b.filePath === breakpoint.filePath &&\n          b.lineNumber === breakpoint.lineNumber &&\n          b.columnNumber === breakpoint.columnNumber;\n      });\n      if (item) {\n        return Debugger\n          .removeBreakpoint({\n            breakpointId: item.breakpointId\n          })\n          .then(() => {\n            const index = this.breakpoints.indexOf(item);\n            this.breakpoints.splice(index, 1);\n          });\n      }\n      return Promise.resolve();\n    });\n  }\n  resume () {\n    return this.requestIfRunning(({ Debugger }) => {\n      return Debugger.resume();\n    });\n  }\n  pause () {\n    return this.requestIfRunning(({ Debugger }) => {\n      return Debugger.pause();\n    });\n  }\n  stepOver () {\n    return this.requestIfRunning(({ Debugger }) => {\n      return Debugger.stepOver();\n    });\n  }\n  stepInto () {\n    return this.requestIfRunning(({ Debugger }) => {\n      return Debugger.stepInto();\n    });\n  }\n  stepOut () {\n    return this.requestIfRunning(({ Debugger }) => {\n      return Debugger.stepOut();\n    });\n  }\n  async attach (\n    hostname: string,\n    port: number): Promise<boolean> {\n    const sockets = await this\n      .getSockets(hostname, port, 5)\n      .catch((error) => {\n        throw new Error(error);\n      });\n    if (sockets && sockets.length > 0) {\n      const socket = sockets[0];\n      this.protocol = new ChromeDebuggingProtocol(socket.webSocketDebuggerUrl);\n      await this.protocol.connect();\n      await this.setup().then(() => {\n        this.isRunning = true;\n      });\n    }\n    return false;\n  }\n  dettach () {\n    if (this.protocol) {\n      this.protocol.disconnect();\n      this.protocol = undefined;\n      this.isRunning = false;\n      this.sourcemaps = [];\n      this.scripts = [];\n      this.breakpoints = [];\n    }\n  }\n  getSockets (hostname: string, port: number, attempts?: number) {\n    return new Promise<any>((resolve, reject) => {\n      const errorHandler = (e) => {\n        if (attempts && attempts > 0) {\n          attempts--;\n          setTimeout(() => resolve(this.getSockets(hostname, port, attempts)), 500);\n        } else {\n          reject(e);\n        }\n      }\n      let req = request({\n        hostname,\n        port,\n        path: '/json',\n        method: 'GET'\n      }, (res) => {\n        res.setEncoding('utf8')\n        res.on('data', (chunk) => {\n          try {\n            const json = JSON.parse(chunk.toString());\n            resolve(json.filter((page) => page.webSocketDebuggerUrl));\n          } catch (e) {\n            errorHandler(e)\n          }\n        })\n      })\n      req.on('error', errorHandler);\n      req.end();\n    })\n  }\n}\n"]}