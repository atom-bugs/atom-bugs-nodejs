{"version":3,"file":"node-plugin.js","sourceRoot":"","sources":["../../src/plugin/node-plugin.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+DAAoF;AAEpF,iDAA8C;AAC9C,iDAA8C;AAC9C,+CAAqD;AAErD;IAAgC,8BAA6B;IAQ3D;QAAA,YACE,iBAAO,SAER;QATM,aAAO,GAAW,0BAAW,CAAA;QAC7B,UAAI,GAAW,SAAS,CAAA;QACxB,cAAQ,GAAW,0CAA0C,CAAA;QAC7D,cAAQ,GAAiB,IAAI,4BAAY,EAAE,CAAA;QAC3C,cAAQ,GAAiB,IAAI,4BAAY,EAAE,CAAA;QAIhD,KAAI,CAAC,iBAAiB,EAAE,CAAA;;IAC1B,CAAC;IAGK,2BAAM,GAAZ;;6BAOY,MAAM;;;;wBANhB,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,KAAK,EAAE,CAAA;wBACnB,qBAAM,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,EAAA;;kCAApC,SAAoC;wBAC1C,KAAA,OAAO,CAAC,OAAO,CAAA;;iCAChB,sBAAO,CAAC,WAAW,EAAnB,MAAM,kBAAa;iCACnB,sBAAO,CAAC,MAAM,EAAd,MAAM,kBAAQ;iCAmBd,sBAAO,CAAC,MAAM,EAAd,MAAM,kBAAQ;;;;wBAlBjB,EAAE,CAAC,CAAC,OAAO,CAAC,OAAO,KAAK,sBAAO,CAAC,WAAW,CAAC,CAAC,CAAC;qCAC/B,IAAI,CAAC,SAAS,CAAC,mBAAmB,EAAE;4BACjD,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,MAAM,CAAC,OAAO,EAAE,CAAA;wBAC7C,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAA;4BAC7C,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAA;wBACjD,CAAC;wBACD,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,+BAA6B,OAAO,CAAC,IAAM,CAAC,CAAA;wBAC3E,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,qBAAmB,IAAI,CAAC,QAAQ,CAAC,UAAY,CAAC,CAAA;wBAC7E,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAA;wBAC7C,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,OAAO,CAAC,IAAI,CAAA;wBAEvC,IAAI,CAAC,QAAQ,CAAC,eAAe,GAAG,OAAO,CAAC,eAAe,CAAA;wBACvD,IAAI,CAAC,QAAQ,CAAC,oBAAoB,GAAG,OAAO,CAAC,oBAAoB,CAAA;wBAC3C,qBAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,EAAA;;0CAA3B,SAA2B;wBACjD,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,CAAA;wBACvB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,eAAe,CAAC,CAAA;wBACtC,wBAAK;;wBAEL,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAA;wBAC1C,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAA;wBACvB,qBAAM,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,EAAA;;0CAAlC,SAAkC;wBACxD,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,CAAA;wBACvB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,eAAe,CAAC,CAAA;wBACtC,wBAAK;;;;;KAEV;IACH,iBAAC;AAAD,CAAC,AA/CD,CAAgC,sCAA6B,GA+C5D;AA/CY,gCAAU","sourcesContent":["import { ChromeDebuggingProtocolPlugin } from 'atom-bugs-chrome-debugger/lib/plugin'\n\nimport { NodeLauncher } from './node-launcher'\nimport { NodeDebugger } from './node-debugger'\nimport { Runtype, NodeOptions } from './node-options'\n\nexport class NodePlugin extends ChromeDebuggingProtocolPlugin {\n\n  public options: Object = NodeOptions\n  public name: String = 'Node.js'\n  public iconPath: String = 'atom://atom-bugs-nodejs/icons/nodejs.svg'\n  public launcher: NodeLauncher = new NodeLauncher()\n  public debugger: NodeDebugger = new NodeDebugger()\n\n  constructor () {\n    super()\n    this.addEventListeners()\n  }\n\n  // Actions\n  async didRun () {\n    this.pluginClient.console.clear()\n    let options = await this.pluginClient.getOptions()\n    switch (options.runType) {\n      case Runtype.CurrentFile:\n      case Runtype.Script:\n        if (options.runType === Runtype.CurrentFile) {\n          let editor = atom.workspace.getActiveTextEditor()\n          this.launcher.scriptPath = editor.getPath()\n        } else {\n          this.launcher.scriptPath = options.scriptPath\n          this.launcher.cwd = this.pluginClient.getPath()\n        }\n        this.pluginClient.console.info(`Starting Debugger on port ${options.port}`)\n        this.pluginClient.console.info(`Running script: ${this.launcher.scriptPath}`)\n        this.launcher.binaryPath = options.binaryPath\n        this.launcher.portNumber = options.port\n\n        this.launcher.launchArguments = options.launchArguments\n        this.launcher.environmentVariables = options.environmentVariables\n        let scriptSocketUrl = await this.launcher.start()\n        this.pluginClient.run()\n        this.debugger.connect(scriptSocketUrl)\n        break\n      case Runtype.Remote:\n        this.launcher.hostName = options.remoteUrl\n        this.launcher.portNumber = options.remotePort\n        let remoteSocketUrl = await this.launcher.getSocketUrl()\n        this.pluginClient.run()\n        this.debugger.connect(remoteSocketUrl)\n        break\n    }\n  }\n}\n"]}