{"version":3,"file":"node-plugin.js","sourceRoot":"","sources":["../../src/plugin/node-plugin.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+DAAoF;AAEpF,iDAA8C;AAC9C,iDAA8C;AAC9C,+CAAqD;AAErD;IAAgC,8BAA6B;IAQ3D;QAAA,YACE,iBAAO,SAER;QATM,aAAO,GAAW,0BAAW,CAAA;QAC7B,UAAI,GAAW,SAAS,CAAA;QACxB,cAAQ,GAAW,0CAA0C,CAAA;QAC7D,cAAQ,GAAiB,IAAI,4BAAY,EAAE,CAAA;QAC3C,cAAQ,GAAiB,IAAI,4BAAY,EAAE,CAAA;QAIhD,KAAI,CAAC,iBAAiB,EAAE,CAAA;;IAC1B,CAAC;IAED,mCAAc,GAAd,UAAgB,OAAe;QAC7B,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,oBAAoB,EAAE;YAChD,MAAM,EAAE,qBAAmB,OAAS;YACpC,WAAW,EAAE,IAAI;SAClB,CAAC,CAAA;IACJ,CAAC;IAGK,2BAAM,GAAZ;;gBAEM,SAAS,eAOH,MAAM;;;;wBARhB,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,KAAK,EAAE,CAAA;wBAEnB,qBAAM,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,EAAA;;kCAApC,SAAoC;wBAClD,IAAI,CAAC,QAAQ,CAAC,cAAc,GAAG,IAAI,CAAA;wBAC3B,KAAA,OAAO,CAAC,OAAO,CAAA;;iCAChB,sBAAO,CAAC,WAAW,EAAnB,MAAM,kBAAa;iCACnB,sBAAO,CAAC,MAAM,EAAd,MAAM,kBAAQ;iCAed,sBAAO,CAAC,MAAM,EAAd,MAAM,kBAAQ;;;;wBAdjB,EAAE,CAAC,CAAC,OAAO,CAAC,OAAO,KAAK,sBAAO,CAAC,WAAW,CAAC,CAAC,CAAC;qCAC/B,IAAI,CAAC,SAAS,CAAC,mBAAmB,EAAE;4BACjD,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,MAAM,CAAC,OAAO,EAAE,CAAA;wBAC7C,CAAC;wBAAC,IAAI,CAAC,CAAC;4BACN,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAA;4BAC7C,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAA;wBACjD,CAAC;wBACD,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAA;wBAC7C,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,OAAO,CAAC,IAAI,CAAA;wBAEvC,IAAI,CAAC,QAAQ,CAAC,eAAe,GAAG,OAAO,CAAC,eAAe,CAAA;wBACvD,IAAI,CAAC,QAAQ,CAAC,oBAAoB,GAAG,OAAO,CAAC,oBAAoB,CAAA;wBACrD,qBAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,EAAA;;wBAAvC,SAAS,GAAG,SAA2B,CAAA;wBACvC,wBAAK;;wBAEL,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAA;wBAC1C,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAA;wBACjC,qBAAM,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,EAAA;;wBAA9C,SAAS,GAAG,SAAkC,CAAA;wBAC9C,wBAAK;;wBAET,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;4BACd,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,CAAA;4BACvB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,SAAS,CAAC,CAAA;wBAClC,CAAC;;;;;KACF;IACH,iBAAC;AAAD,CAAC,AAtDD,CAAgC,sCAA6B,GAsD5D;AAtDY,gCAAU","sourcesContent":["import { ChromeDebuggingProtocolPlugin } from 'atom-bugs-chrome-debugger/lib/plugin'\n\nimport { NodeLauncher } from './node-launcher'\nimport { NodeDebugger } from './node-debugger'\nimport { Runtype, NodeOptions } from './node-options'\n\nexport class NodePlugin extends ChromeDebuggingProtocolPlugin {\n\n  public options: Object = NodeOptions\n  public name: String = 'Node.js'\n  public iconPath: String = 'atom://atom-bugs-nodejs/icons/nodejs.svg'\n  public launcher: NodeLauncher = new NodeLauncher()\n  public debugger: NodeDebugger = new NodeDebugger()\n\n  constructor () {\n    super()\n    this.addEventListeners()\n  }\n\n  didLaunchError (message: string) {\n    atom.notifications.addError('Atom Bugs: Node.js', {\n      detail: `Launcher error: ${message}`,\n      dismissable: true\n    })\n  }\n\n  // Actions\n  async didRun () {\n    this.pluginClient.console.clear()\n    let socketUrl\n    let options = await this.pluginClient.getOptions()\n    this.debugger.skipFirstPause = true\n    switch (options.runType) {\n      case Runtype.CurrentFile:\n      case Runtype.Script:\n        if (options.runType === Runtype.CurrentFile) {\n          let editor = atom.workspace.getActiveTextEditor()\n          this.launcher.scriptPath = editor.getPath()\n        } else {\n          this.launcher.scriptPath = options.scriptPath\n          this.launcher.cwd = this.pluginClient.getPath()\n        }\n        this.launcher.binaryPath = options.binaryPath\n        this.launcher.portNumber = options.port\n\n        this.launcher.launchArguments = options.launchArguments\n        this.launcher.environmentVariables = options.environmentVariables\n        socketUrl = await this.launcher.start()\n        break\n      case Runtype.Remote:\n        this.launcher.hostName = options.remoteUrl\n        this.launcher.portNumber = options.remotePort\n        socketUrl = await this.launcher.getSocketUrl()\n        break\n    }\n    if (socketUrl) {\n      this.pluginClient.run()\n      this.debugger.connect(socketUrl)\n    }\n  }\n}\n"]}